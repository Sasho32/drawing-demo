let SELECTED_POLYLINE_ORIGINAL_COLOR=null;const markersArray=[];let currentLine=null;const lines=[],logLinesBtn=document.querySelector("button#log-lines"),drawingModeCheckbox=document.querySelector("input#drawing-mode-checkbox"),startNewLineBtn=document.querySelector("button#start-line-btn"),colorPicker=document.querySelector('input[type="color"]');let SELECTED_COLOR=colorPicker.value;colorPicker.addEventListener("change",()=>{console.log(colorPicker.value),SELECTED_COLOR=colorPicker.value}),startNewLineBtn.addEventListener("click",()=>{currentLine=null});let selectedPolyline=null;const deleteLineBtn=document.querySelector("button#delete-line"),dialog=document.querySelector("dialog"),yesButton=dialog.querySelector("div > span:first-child"),noButton=dialog.querySelector("div > span:last-child");function initMap(){let e=new google.maps.Map(document.querySelector("section#map"),{center:{lat:42.1354,lng:24.7453},zoom:5,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},]});google.maps.event.addListener(e,"click",function(t){if(console.log(t),drawingModeCheckbox.checked){if(console.log(`%cLat: ${t.latLng.lat()}`,"background: black; color: white"),console.log(`%cLng: ${t.latLng.lng()}`,"background: green; color: black"),!currentLine||0===currentLine.getPath().getLength()){function l(e){e.setMap(null)}currentLine=new google.maps.Polyline({path:[],geodesic:!0,strokeColor:SELECTED_COLOR,strokeOpacity:1,strokeWeight:10}),lines.push(currentLine),currentLine.addListener("click",function(){selectedPolyline&&selectedPolyline.setOptions({strokeColor:SELECTED_POLYLINE_ORIGINAL_COLOR}),selectedPolyline=this,document.body.classList.add("selected-line"),SELECTED_POLYLINE_ORIGINAL_COLOR=this.get("strokeColor"),this.setOptions({strokeColor:"white"}),deleteLineBtn.scrollIntoView()}),currentLine.setMap(e)}currentLine.getPath().push(t.latLng)}}),deleteLineBtn.addEventListener("click",()=>{dialog.show(),document.body.classList.add("modal-opened")}),yesButton.addEventListener("click",()=>{selectedPolyline.setMap(null),currentLine=null,lines.splice(lines.indexOf(selectedPolyline),1),document.body.classList.remove("selected-line"),document.body.classList.remove("modal-opened"),dialog.close(),SELECTED_POLYLINE_ORIGINAL_COLOR=null,selectedPolyline=null}),noButton.addEventListener("click",()=>{document.body.classList.remove("selected-line"),document.body.classList.remove("modal-opened"),dialog.close(),console.log(SELECTED_POLYLINE_ORIGINAL_COLOR),selectedPolyline.setOptions({strokeColor:SELECTED_POLYLINE_ORIGINAL_COLOR}),SELECTED_POLYLINE_ORIGINAL_COLOR=null,selectedPolyline=null}),logLinesBtn.addEventListener("click",()=>{if(console.clear(),lines.forEach((e,t)=>{let l=e.get("strokeColor");console.log(`%cLine: ${t+1}`,`color: #fff; background-color: ${l}; font-size: 2rem; font-weight: bold;`),e.getPath().forEach((e,t)=>{console.log(`%cPoint: ${t+1}:`,"text-align: center; border-radius: 1rem; background-color: #333; padding: 1rem; color: #fff;"),console.log("Lat:",e.lat()),console.log("Lng",e.lng())})}),"Show points"===logLinesBtn.textContent){logLinesBtn.textContent="Hide points",getPointsOnMap(e);return}logLinesBtn.textContent="Show points",hidePoints()})}function addMarker(e,t,l,n,o){let i="black";console.log(i);let r=`
   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${o}" stroke="${i}" stroke-width="2" width="48px" height="48px">
       <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
   </svg>
`,s=new google.maps.Marker({position:{lat:t,lng:l},map:e,title:`${n+1}`,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(r)}});markersArray.push(s)}function getPointsOnMap(e){lines.forEach(t=>{let l=t.get("strokeColor");t.getPath().forEach((t,n)=>{addMarker(e,t.lat(),t.lng(),n,l)})})}function hidePoints(){markersArray.forEach(e=>e.setMap(null))}